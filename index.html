<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fitness Goal Planner | Alpha Tech</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #4361ee;
      --primary-dark: #3a56d4;
      --secondary-color: #3f37c9;
      --accent-color: #4895ef;
      --light-color: #f8f9fa;
      --dark-color: #212529;
      --gray-color: #6c757d;
      --success-color: #4bb543;
      --warning-color: #ff9f1c;
      --danger-color: #ef476f;
      --info-color: #4895ef;
      --border-radius: 12px;
      --box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }

    .dark-mode {
      --light-color: #121212;
      --dark-color: #f8f9fa;
      --gray-color: #adb5bd;
      --box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      height: 100%;
      font-size: 16px;
    }

    body {
      min-height: 100%;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--light-color);
      color: var(--dark-color);
      line-height: 1.6;
      transition: var(--transition);
      display: flex;
      flex-direction: column;
    }

    .wrapper {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    header {
      padding: 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-color);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .logo i {
      font-size: 1.8rem;
    }

    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 2rem;
      transition: var(--transition);
    }

    /* Home section */
    .hero-section {
      text-align: center;
      max-width: 800px;
      margin: 0 auto;
    }

    .hero-title {
      font-size: 3.5rem;
      margin-bottom: 1.5rem;
      background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      line-height: 1.2;
    }

    .hero-subtitle {
      font-size: 1.25rem;
      color: var(--gray-color);
      margin-bottom: 2.5rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .cta-button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 1rem 2.5rem;
      font-size: 1.1rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
      font-weight: 600;
      box-shadow: var(--box-shadow);
    }

    .cta-button:hover {
      background-color: var(--primary-dark);
      transform: translateY(-3px);
    }

    /* Form styles */
    .form-container {
      display: none;
      background-color: var(--light-color);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 2.5rem;
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
      transition: var(--transition);
    }

    .form-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .form-title {
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
      color: var(--primary-color);
    }

    .form-subtitle {
      color: var(--gray-color);
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .form-input {
      width: 100%;
      padding: 1rem;
      border: 2px solid #e9ecef;
      border-radius: var(--border-radius);
      font-size: 1rem;
      transition: var(--transition);
    }

    .form-input:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    }

    .form-button {
      width: 100%;
      padding: 1rem;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      margin-top: 1rem;
    }

    .form-button:hover {
      background-color: var(--primary-dark);
    }

    /* Navigation controls */
    .nav-controls {
      display: flex;
      justify-content: space-between;
      margin-top: 1.5rem;
      gap: 1rem;
    }

    .nav-button {
      flex: 1;
      padding: 0.8rem;
      border-radius: var(--border-radius);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      text-align: center;
    }

    .back-button {
      background-color: var(--light-color);
      color: var(--gray-color);
      border: 2px solid var(--gray-color);
    }

    .back-button:hover {
      background-color: #f1f3f5;
    }

    .next-button {
      background-color: var(--primary-color);
      color: white;
      border: 2px solid var(--primary-color);
    }

    .next-button:hover {
      background-color: var(--primary-dark);
      border-color: var(--primary-dark);
    }

    /* Progress indicator */
    .progress-container {
      width: 100%;
      max-width: 500px;
      margin: 0 auto 2rem;
      display: none;
    }

    .progress-steps {
      display: flex;
      justify-content: space-between;
      position: relative;
    }

    .progress-steps::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 4px;
      background-color: #e9ecef;
      transform: translateY(-50%);
      z-index: 1;
    }

    .progress-bar {
      position: absolute;
      top: 50%;
      left: 0;
      height: 4px;
      background-color: var(--primary-color);
      transform: translateY(-50%);
      z-index: 2;
      transition: width 0.4s ease;
    }

    .step {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-color: #e9ecef;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--gray-color);
      font-weight: 600;
      position: relative;
      z-index: 3;
      transition: var(--transition);
    }

    .step.active {
      background-color: var(--primary-color);
      color: white;
    }

    .step.completed {
      background-color: var(--success-color);
      color: white;
    }

    /* Results display */
    .results-container {
      display: none;
      max-width: 800px;
      margin: 0 auto;
    }

    .results-title {
      font-size: 2rem;
      margin-bottom: 1.5rem;
      color: var(--primary-color);
      text-align: center;
    }

    .results-card {
      background-color: var(--light-color);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 2rem;
      margin-bottom: 2rem;
    }

    .result-item {
      display: flex;
      justify-content: space-between;
      padding: 1rem 0;
      border-bottom: 1px solid #e9ecef;
    }

    .result-item:last-child {
      border-bottom: none;
    }

    .result-label {
      font-weight: 600;
      color: var(--gray-color);
    }

    .result-value {
      font-weight: 700;
    }

    .bmi-value {
      font-size: 2.5rem;
      font-weight: 700;
      margin: 1.5rem 0;
      color: var(--primary-color);
      text-align: center;
    }

    .bmi-category {
      font-size: 1.2rem;
      padding: 0.5rem 1rem;
      border-radius: var(--border-radius);
      display: inline-block;
      margin-bottom: 1.5rem;
      text-align: center;
      width: 100%;
    }

    .bmi-underweight {
      background-color: var(--info-color);
      color: white;
    }

    .bmi-normal {
      background-color: var(--success-color);
      color: white;
    }

    .bmi-overweight {
      background-color: var(--warning-color);
      color: white;
    }

    .bmi-obese {
      background-color: var(--danger-color);
      color: white;
    }

    /* Plan sections */
    .plan-section {
      margin-top: 3rem;
    }

    .plan-title {
      font-size: 1.5rem;
      color: var(--primary-color);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .plan-card {
      background-color: var(--light-color);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .plan-subtitle {
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-bottom: 1rem;
    }

    .macros-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .macro-card {
      background-color: rgba(67, 97, 238, 0.1);
      border-radius: var(--border-radius);
      padding: 1rem;
      text-align: center;
    }

    .macro-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-color);
    }

    .macro-label {
      color: var(--gray-color);
      font-size: 0.9rem;
    }

    .meal-plan {
      margin-top: 1rem;
    }

    .meal-time {
      font-weight: 600;
      margin: 1rem 0 0.5rem;
      color: var(--primary-color);
    }

    .meal-item {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0;
      border-bottom: 1px dashed #e9ecef;
    }

    .meal-item:last-child {
      border-bottom: none;
    }

    .workout-plan {
      margin-top: 1rem;
    }

    .workout-day {
      margin-bottom: 1.5rem;
    }

    .day-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--primary-color);
    }

    .exercise {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0;
    }

    .exercise-name {
      font-weight: 500;
    }

    .exercise-sets {
      color: var(--gray-color);
    }

    .restart-button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 1rem 2rem;
      font-size: 1rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
      font-weight: 600;
      margin-top: 2rem;
      display: block;
      width: 100%;
      max-width: 200px;
      margin-left: auto;
      margin-right: auto;
    }

    .restart-button:hover {
      background-color: var(--primary-dark);
    }

    /* Settings menu */
    .settings-button {
      background: none;
      border: none;
      color: var(--dark-color);
      font-size: 1.5rem;
      cursor: pointer;
      transition: var(--transition);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .dark-mode .settings-button {
      color: var(--light-color);
    }

    .settings-button:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .dark-mode .settings-button:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .settings-menu {
      position: absolute;
      right: 1rem;
      top: 4rem;
      background-color: var(--light-color);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 1rem;
      width: 250px;
      z-index: 100;
      display: none;
      transition: var(--transition);
    }

    .settings-menu.show {
      display: block;
    }

    .settings-item {
      padding: 0.75rem 0;
      border-bottom: 1px solid #e9ecef;
    }

    .settings-item:last-child {
      border-bottom: none;
    }

    .settings-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .settings-options {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    .settings-option {
      flex: 1;
      padding: 0.5rem;
      border-radius: 6px;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
      border: 1px solid #e9ecef;
    }

    .settings-option:hover {
      background-color: #f1f3f5;
    }

    .dark-mode .settings-option:hover {
      background-color: #333;
    }

    .settings-option.active {
      background-color: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
      margin-left: auto;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: var(--transition);
      border-radius: 24px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: var(--transition);
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: var(--primary-color);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(26px);
    }

    .paypal-id {
      font-family: monospace;
      background-color: rgba(0, 0, 0, 0.05);
      padding: 0.5rem;
      border-radius: 4px;
      word-break: break-all;
    }

    .dark-mode .paypal-id {
      background-color: rgba(255, 255, 255, 0.1);
    }

    /* Goal selection form */
    .goal-form {
      display: none;
    }

    .goal-options {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .goal-option {
      display: flex;
      align-items: center;
      padding: 1rem;
      border: 2px solid #e9ecef;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
    }

    .goal-option:hover {
      border-color: var(--primary-color);
    }

    .goal-option.active {
      border-color: var(--primary-color);
      background-color: rgba(67, 97, 238, 0.1);
    }

    .goal-icon {
      font-size: 1.5rem;
      margin-right: 1rem;
      color: var(--primary-color);
    }

    .goal-text {
      flex: 1;
    }

    .goal-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .goal-description {
      color: var(--gray-color);
      font-size: 0.9rem;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 1.5rem;
      color: var(--gray-color);
      font-size: 0.9rem;
    }

    /* Responsive design */
    @media (max-width: 768px) {
      .hero-title {
        font-size: 2.5rem;
      }

      .hero-subtitle {
        font-size: 1.1rem;
      }

      .form-container, .results-container {
        padding: 1.5rem;
      }

      .form-title {
        font-size: 1.5rem;
      }
      
      .macros-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      .hero-title {
        font-size: 2rem;
      }

      .cta-button {
        padding: 0.8rem 1.5rem;
        font-size: 1rem;
      }

      .form-container, .results-container {
        padding: 1rem;
      }

      .nav-controls {
        flex-direction: column;
      }

      .goal-options {
        gap: 0.75rem;
      }

      .goal-option {
        padding: 0.75rem;
      }
    }

    /* Animation */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .fade-in {
      animation: fadeIn 0.5s ease forwards;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <header>
      <div class="logo">
        <i class="fas fa-dumbbell"></i>
        <span>Fitness Goal Planner</span>
      </div>
      <button class="settings-button" id="settingsButton">
        <i class="fas fa-cog"></i>
      </button>
      <div class="settings-menu" id="settingsMenu">
        <div class="settings-item">
          <div class="settings-title">
            <i class="fas fa-moon"></i>
            <span>Dark Mode</span>
            <label class="toggle-switch">
              <input type="checkbox" id="darkModeToggle">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
        <div class="settings-item">
          <div class="settings-title">
            <i class="fas fa-text-height"></i>
            <span>Font Size</span>
          </div>
          <div class="settings-options">
            <div class="settings-option" data-size="small">S</div>
            <div class="settings-option active" data-size="medium">M</div>
            <div class="settings-option" data-size="large">L</div>
          </div>
        </div>
        <div class="settings-item">
          <div class="settings-title">
            <i class="fas fa-palette"></i>
            <span>Theme Color</span>
          </div>
          <div class="settings-options">
            <div class="settings-option" data-color="blue" style="background-color: #4361ee;"></div>
            <div class="settings-option" data-color="green" style="background-color: #4bb543;"></div>
            <div class="settings-option" data-color="purple" style="background-color: #7209b7;"></div>
            <div class="settings-option" data-color="red" style="background-color: #ef476f;"></div>
          </div>
        </div>
        <div class="settings-item">
          <div class="settings-title">
            <i class="fas fa-hand-holding-usd"></i>
            <span>Financial Support</span>
          </div>
          <p style="margin-top: 0.5rem;">Support our work via PayPal:</p>
          <div class="paypal-id">MUDC4JXAGZ4EW</div>
        </div>
      </div>
    </header>

    <main class="main-content">
      <!-- Home Section -->
      <section class="hero-section" id="homeSection">
        <h1 class="hero-title fade-in">Achieve Your Fitness Goals</h1>
        <p class="hero-subtitle fade-in">Get personalized nutrition and workout plans based on your body metrics and objectives</p>
        <button class="cta-button fade-in" id="startButton">Get Started</button>
      </section>

      <!-- Progress Indicator -->
      <div class="progress-container" id="progressContainer">
        <div class="progress-steps">
          <div class="step" id="step1">1</div>
          <div class="step" id="step2">2</div>
          <div class="step" id="step3">3</div>
          <div class="progress-bar" id="progressBar"></div>
        </div>
      </div>

      <!-- Weight Form -->
      <div class="form-container" id="weightFormContainer">
        <div class="form-header">
          <h2 class="form-title">Your Weight</h2>
          <p class="form-subtitle">Enter your current weight to calculate your plan</p>
        </div>
        <form id="weightForm">
          <div class="form-group">
            <label for="weightInput" class="form-label">Weight (kg)</label>
            <input type="number" id="weightInput" class="form-input" placeholder="e.g. 75" min="30" max="300" required>
          </div>
          <div class="nav-controls">
            <button type="button" class="nav-button back-button" id="weightBackButton">
              <i class="fas fa-arrow-left"></i> Back
            </button>
            <button type="submit" class="nav-button next-button">
              Next <i class="fas fa-arrow-right"></i>
            </button>
          </div>
        </form>
      </div>

      <!-- Height Form -->
      <div class="form-container" id="heightFormContainer">
        <div class="form-header">
          <h2 class="form-title">Your Height</h2>
          <p class="form-subtitle">Enter your height to complete your profile</p>
        </div>
        <form id="heightForm">
          <div class="form-group">
            <label for="heightInput" class="form-label">Height (cm)</label>
            <input type="number" id="heightInput" class="form-input" placeholder="e.g. 175" min="100" max="250" required>
          </div>
          <div class="nav-controls">
            <button type="button" class="nav-button back-button" id="heightBackButton">
              <i class="fas fa-arrow-left"></i> Back
            </button>
            <button type="submit" class="nav-button next-button">
              Next <i class="fas fa-arrow-right"></i>
            </button>
          </div>
        </form>
      </div>

      <!-- Goal Selection Form -->
      <div class="form-container goal-form" id="goalFormContainer">
        <div class="form-header">
          <h2 class="form-title">Your Fitness Goal</h2>
          <p class="form-subtitle">Select your primary objective to customize your plan</p>
        </div>
        <form id="goalForm">
          <div class="goal-options">
            <div class="goal-option" id="bulkOption">
              <div class="goal-icon">
                <i class="fas fa-arrow-up"></i>
              </div>
              <div class="goal-text">
                <div class="goal-title">Bulk: Gain Weight & Muscle</div>
                <div class="goal-description">Increase calorie intake with focus on protein to build muscle mass</div>
              </div>
            </div>
            <div class="goal-option" id="cutOption">
              <div class="goal-icon">
                <i class="fas fa-arrow-down"></i>
              </div>
              <div class="goal-text">
                <div class="goal-title">Cut: Lose Fat</div>
                <div class="goal-description">Reduce calorie intake while maintaining protein to preserve muscle</div>
              </div>
            </div>
          </div>
          <div class="nav-controls">
            <button type="button" class="nav-button back-button" id="goalBackButton">
              <i class="fas fa-arrow-left"></i> Back
            </button>
            <button type="submit" class="nav-button next-button">
              Get My Plan <i class="fas fa-arrow-right"></i>
            </button>
          </div>
        </form>
      </div>

      <!-- Results Section -->
      <div class="results-container" id="resultsContainer">
        <h2 class="results-title">Your Personalized Plan</h2>
        <div class="results-card">
          <div class="result-item">
            <span class="result-label">Weight</span>
            <span class="result-value" id="resultWeight">-- kg</span>
          </div>
          <div class="result-item">
            <span class="result-label">Height</span>
            <span class="result-value" id="resultHeight">-- cm</span>
          </div>
          <div class="result-item">
            <span class="result-label">Goal</span>
            <span class="result-value" id="resultGoal">--</span>
          </div>
          <div class="bmi-value" id="bmiValue">--</div>
          <div class="bmi-category" id="bmiCategory">BMI Category</div>
        </div>

        <!-- Nutrition Plan -->
        <div class="plan-section" id="nutritionPlan">
          <h3 class="plan-title"><i class="fas fa-utensils"></i> Nutrition Plan</h3>
          <div class="plan-card">
            <h4 class="plan-subtitle">Daily Macronutrient Targets</h4>
            <div class="macros-grid" id="macrosGrid">
              <!-- Filled by JavaScript -->
            </div>
            <h4 class="plan-subtitle">Sample Meal Plan</h4>
            <div class="meal-plan" id="mealPlan">
              <!-- Filled by JavaScript -->
            </div>
          </div>
        </div>

        <!-- Workout Plan -->
        <div class="plan-section" id="workoutPlan">
          <h3 class="plan-title"><i class="fas fa-dumbbell"></i> Workout Plan</h3>
          <div class="plan-card">
            <div class="workout-plan" id="workoutPlanContent">
              <!-- Filled by JavaScript -->
            </div>
          </div>
        </div>

        <button class="restart-button" id="restartButton">
          <i class="fas fa-redo"></i> Start Again
        </button>
      </div>
    </main>

    <footer>
      <p>&copy; 2023 Alpha Tech. All rights reserved.</p>
    </footer>
  </div>

  <script>
    // DOM Elements
    const body = document.body;
    const settingsButton = document.getElementById('settingsButton');
    const settingsMenu = document.getElementById('settingsMenu');
    const darkModeToggle = document.getElementById('darkModeToggle');
    const fontOptions = document.querySelectorAll('.settings-option[data-size]');
    const colorOptions = document.querySelectorAll('.settings-option[data-color]');
    
    // Section elements
    const homeSection = document.getElementById('homeSection');
    const progressContainer = document.getElementById('progressContainer');
    const weightFormContainer = document.getElementById('weightFormContainer');
    const heightFormContainer = document.getElementById('heightFormContainer');
    const goalFormContainer = document.getElementById('goalFormContainer');
    const resultsContainer = document.getElementById('resultsContainer');
    
    // Form elements
    const startButton = document.getElementById('startButton');
    const weightForm = document.getElementById('weightForm');
    const heightForm = document.getElementById('heightForm');
    const goalForm = document.getElementById('goalForm');
    const weightInput = document.getElementById('weightInput');
    const heightInput = document.getElementById('heightInput');
    
    // Goal selection
    const bulkOption = document.getElementById('bulkOption');
    const cutOption = document.getElementById('cutOption');
    
    // Navigation buttons
    const weightBackButton = document.getElementById('weightBackButton');
    const heightBackButton = document.getElementById('heightBackButton');
    const goalBackButton = document.getElementById('goalBackButton');
    const restartButton = document.getElementById('restartButton');
    
    // Progress indicator elements
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    const progressBar = document.getElementById('progressBar');
    
    // Results elements
    const resultWeight = document.getElementById('resultWeight');
    const resultHeight = document.getElementById('resultHeight');
    const resultGoal = document.getElementById('resultGoal');
    const bmiValue = document.getElementById('bmiValue');
    const bmiCategory = document.getElementById('bmiCategory');
    const macrosGrid = document.getElementById('macrosGrid');
    const mealPlan = document.getElementById('mealPlan');
    const workoutPlanContent = document.getElementById('workoutPlanContent');

    // State management
    let currentState = 'home';
    let weight = null;
    let height = null;
    let bmi = null;
    let category = '';
    let goal = 'bulk'; // Default to bulk

    // Initialize the app
    function init() {
      loadPreferences();
      setupEventListeners();
      showSection('home');
    }

    // Load user preferences from localStorage
    function loadPreferences() {
      if (localStorage.getItem('darkMode') === 'enabled') {
        body.classList.add('dark-mode');
        darkModeToggle.checked = true;
      }
      
      const savedFontSize = localStorage.getItem('fontSize') || 'medium';
      setFontSize(savedFontSize);
      document.querySelector(`.settings-option[data-size="${savedFontSize}"]`).classList.add('active');
      
      const savedColor = localStorage.getItem('themeColor') || 'blue';
      setThemeColor(savedColor);
      document.querySelector(`.settings-option[data-color="${savedColor}"]`).classList.add('active');
    }

    // Set up all event listeners
    function setupEventListeners() {
      // Settings menu
      settingsButton.addEventListener('click', toggleSettingsMenu);
      
      // Dark mode toggle
      darkModeToggle.addEventListener('change', toggleDarkMode);
      
      // Font size options
      fontOptions.forEach(option => {
        option.addEventListener('click', () => {
          fontOptions.forEach(opt => opt.classList.remove('active'));
          option.classList.add('active');
          const size = option.dataset.size;
          setFontSize(size);
          localStorage.setItem('fontSize', size);
        });
      });
      
      // Color theme options
      colorOptions.forEach(option => {
        option.addEventListener('click', () => {
          colorOptions.forEach(opt => opt.classList.remove('active'));
          option.classList.add('active');
          const color = option.dataset.color;
          setThemeColor(color);
          localStorage.setItem('themeColor', color);
        });
      });
      
      // Goal selection
      bulkOption.addEventListener('click', () => {
        goal = 'bulk';
        bulkOption.classList.add('active');
        cutOption.classList.remove('active');
      });
      
      cutOption.addEventListener('click', () => {
        goal = 'cut';
        cutOption.classList.add('active');
        bulkOption.classList.remove('active');
      });
      
      // Navigation buttons
      startButton.addEventListener('click', () => showSection('weight'));
      weightBackButton.addEventListener('click', () => showSection('home'));
      heightBackButton.addEventListener('click', () => showSection('weight'));
      goalBackButton.addEventListener('click', () => showSection('height'));
      restartButton.addEventListener('click', () => showSection('home'));
      
      // Form submissions
      weightForm.addEventListener('submit', (e) => {
        e.preventDefault();
        weight = parseFloat(weightInput.value);
        showSection('height');
      });
      
      heightForm.addEventListener('submit', (e) => {
        e.preventDefault();
        height = parseFloat(heightInput.value);
        showSection('goal');
      });
      
      goalForm.addEventListener('submit', (e) => {
        e.preventDefault();
        calculateResults();
        showSection('results');
      });
      
      // Close settings menu when clicking outside
      document.addEventListener('click', (e) => {
        if (!settingsMenu.contains(e.target) && e.target !== settingsButton) {
          settingsMenu.classList.remove('show');
        }
      });
    }

    // Toggle settings menu visibility
    function toggleSettingsMenu() {
      settingsMenu.classList.toggle('show');
    }

    // Toggle dark mode
    function toggleDarkMode() {
      body.classList.toggle('dark-mode');
      const isDarkMode = body.classList.contains('dark-mode');
      localStorage.setItem('darkMode', isDarkMode ? 'enabled' : 'disabled');
    }

    // Set font size
    function setFontSize(size) {
      const sizes = {
        small: '14px',
        medium: '16px',
        large: '18px'
      };
      document.documentElement.style.fontSize = sizes[size];
    }

    // Set theme color
    function setThemeColor(color) {
      const colors = {
        blue: {
          primary: '#4361ee',
          primaryDark: '#3a56d4',
          secondary: '#3f37c9',
          accent: '#4895ef'
        },
        green: {
          primary: '#4bb543',
          primaryDark: '#3fa338',
          secondary: '#3a8a33',
          accent: '#5fd358'
        },
        purple: {
          primary: '#7209b7',
          primaryDark: '#6508a4',
          secondary: '#5a0791',
          accent: '#8a2be2'
        },
        red: {
          primary: '#ef476f',
          primaryDark: '#d63f63',
          secondary: '#bd3756',
          accent: '#ff7096'
        }
      };
      
      const selected = colors[color];
      document.documentElement.style.setProperty('--primary-color', selected.primary);
      document.documentElement.style.setProperty('--primary-dark', selected.primaryDark);
      document.documentElement.style.setProperty('--secondary-color', selected.secondary);
      document.documentElement.style.setProperty('--accent-color', selected.accent);
    }

    // Show the specified section
    function showSection(section) {
      currentState = section;
      
      homeSection.style.display = 'none';
      progressContainer.style.display = 'none';
      weightFormContainer.style.display = 'none';
      heightFormContainer.style.display = 'none';
      goalFormContainer.style.display = 'none';
      resultsContainer.style.display = 'none';
      
      switch (section) {
        case 'home':
          homeSection.style.display = 'block';
          break;
        case 'weight':
          progressContainer.style.display = 'block';
          weightFormContainer.style.display = 'block';
          updateProgress(1);
          weightInput.focus();
          break;
        case 'height':
          progressContainer.style.display = 'block';
          heightFormContainer.style.display = 'block';
          updateProgress(2);
          heightInput.focus();
          break;
        case 'goal':
          progressContainer.style.display = 'block';
          goalFormContainer.style.display = 'block';
          updateProgress(3);
          break;
        case 'results':
          resultsContainer.style.display = 'block';
          break;
      }
      
      history.pushState({ section }, `${section} page`, `#${section}`);
    }

    // Update progress indicator
    function updateProgress(step) {
      step1.classList.remove('active', 'completed');
      step2.classList.remove('active', 'completed');
      step3.classList.remove('active', 'completed');
      
      if (step === 1) {
        step1.classList.add('active');
        progressBar.style.width = '0%';
      } else if (step === 2) {
        step1.classList.add('completed');
        step2.classList.add('active');
        progressBar.style.width = '33%';
      } else if (step === 3) {
        step1.classList.add('completed');
        step2.classList.add('completed');
        step3.classList.add('active');
        progressBar.style.width = '66%';
      }
    }

    // Calculate BMI and display results
    function calculateResults() {
      resultWeight.textContent = `${weight} kg`;
      resultHeight.textContent = `${height} cm`;
      resultGoal.textContent = goal === 'bulk' ? 'Gain Muscle' : 'Lose Fat';
      
      const heightInMeters = height / 100;
      bmi = (weight / (heightInMeters * heightInMeters)).toFixed(1);
      bmiValue.textContent = bmi;
      
      let categoryText = '';
      let categoryClass = '';
      
      if (bmi < 18.5) {
        category = 'underweight';
        categoryText = 'Underweight';
        categoryClass = 'bmi-underweight';
      } else if (bmi >= 18.5 && bmi < 25) {
        category = 'normal';
        categoryText = 'Normal weight';
        categoryClass = 'bmi-normal';
      } else if (bmi >= 25 && bmi < 30) {
        category = 'overweight';
        categoryText = 'Overweight';
        categoryClass = 'bmi-overweight';
      } else {
        category = 'obese';
        categoryText = 'Obese';
        categoryClass = 'bmi-obese';
      }
      
      bmiCategory.textContent = categoryText;
      bmiCategory.className = 'bmi-category ' + categoryClass;
      
      // Generate personalized plans
      generateNutritionPlan();
      generateWorkoutPlan();
    }

    // Generate nutrition plan based on BMI category and goal
    function generateNutritionPlan() {
      macrosGrid.innerHTML = '';
      mealPlan.innerHTML = '';
      
      // Calculate calorie needs based on weight, goal, and activity level
      let baseCalories, protein, carbs, fat;
      
      if (goal === 'bulk') {
        // Bulking plan - higher calories
        baseCalories = weight * (category === 'underweight' ? 38 : category === 'normal' ? 35 : 32);
        protein = Math.round(weight * 2.2); // 2.2g per kg of body weight
        carbs = Math.round((baseCalories * 0.5) / 4); // 50% of calories from carbs
        fat = Math.round((baseCalories * 0.3) / 9); // 30% of calories from fat
      } else {
        // Cutting plan - lower calories
        baseCalories = weight * (category === 'obese' ? 22 : 25);
        protein = Math.round(weight * 2.5); // 2.5g per kg of body weight
        carbs = Math.round((baseCalories * 0.3) / 4); // 30% of calories from carbs
        fat = Math.round((baseCalories * 0.35) / 9); // 35% of calories from fat
      }
      
      const calculatedCalories = (protein * 4) + (carbs * 4) + (fat * 9);
      
      // Add macros to grid
      macrosGrid.innerHTML = `
        <div class="macro-card">
          <div class="macro-value">${protein}g</div>
          <div class="macro-label">Protein</div>
        </div>
        <div class="macro-card">
          <div class="macro-value">${carbs}g</div>
          <div class="macro-label">Carbohydrates</div>
        </div>
        <div class="macro-card">
          <div class="macro-value">${fat}g</div>
          <div class="macro-label">Fat</div>
        </div>
        <div class="macro-card" style="grid-column: span 3;">
          <div class="macro-value">~${calculatedCalories} kcal</div>
          <div class="macro-label">Total Daily Calories</div>
        </div>
      `;
      
      // Generate meal plan based on goal
      let mealPlanHTML = '';
      
      if (goal === 'bulk') {
        mealPlanHTML = `
          <div class="meal-time">Breakfast (700-800 kcal)</div>
          <div class="meal-item">
            <span>3 whole eggs + 3 egg whites scrambled</span>
          </div>
          <div class="meal-item">
            <span>100g oats with banana and peanut butter</span>
          </div>
          <div class="meal-item">
            <span>1 glass whole milk</span>
          </div>
          
          <div class="meal-time">Mid-Morning Snack (400-500 kcal)</div>
          <div class="meal-item">
            <span>Protein shake (2 scoops) with whole milk</span>
          </div>
          <div class="meal-item">
            <span>Handful of mixed nuts</span>
          </div>
          
          <div class="meal-time">Lunch (800-900 kcal)</div>
          <div class="meal-item">
            <span>200g grilled chicken breast</span>
          </div>
          <div class="meal-item">
            <span>200g cooked rice</span>
          </div>
          <div class="meal-item">
            <span>Mixed vegetables with olive oil</span>
          </div>
          
          <div class="meal-time">Afternoon Snack (400-500 kcal)</div>
          <div class="meal-item">
            <span>Greek yogurt with honey and granola</span>
          </div>
          <div class="meal-item">
            <span>1 fruit (apple or banana)</span>
          </div>
          
          <div class="meal-time">Dinner (700-800 kcal)</div>
          <div class="meal-item">
            <span>200g salmon or lean beef</span>
          </div>
          <div class="meal-item">
            <span>150g sweet potatoes</span>
          </div>
          <div class="meal-item">
            <span>Steamed vegetables</span>
          </div>
          
          <div class="meal-time">Before Bed (300-400 kcal)</div>
          <div class="meal-item">
            <span>Cottage cheese with almond butter</span>
          </div>
        `;
      } else {
        mealPlanHTML = `
          <div class="meal-time">Breakfast (400-500 kcal)</div>
          <div class="meal-item">
            <span>3 egg whites + 1 whole egg scramble</span>
          </div>
          <div class="meal-item">
            <span>1 slice whole grain toast</span>
          </div>
          <div class="meal-item">
            <span>1/2 avocado</span>
          </div>
          
          <div class="meal-time">Mid-Morning Snack (200-300 kcal)</div>
          <div class="meal-item">
            <span>Protein shake with water</span>
          </div>
          <div class="meal-item">
            <span>10 almonds</span>
          </div>
          
          <div class="meal-time">Lunch (500-600 kcal)</div>
          <div class="meal-item">
            <span>150g grilled chicken or fish</span>
          </div>
          <div class="meal-item">
            <span>Large mixed salad with olive oil</span>
          </div>
          <div class="meal-item">
            <span>50g quinoa or brown rice</span>
          </div>
          
          <div class="meal-time">Afternoon Snack (200-300 kcal)</div>
          <div class="meal-item">
            <span>Cottage cheese with cucumber</span>
          </div>
          
          <div class="meal-time">Dinner (400-500 kcal)</div>
          <div class="meal-item">
            <span>150g lean protein (chicken, fish, tofu)</span>
          </div>
          <div class="meal-item">
            <span>Steamed or roasted vegetables</span>
          </div>
          <div class="meal-item">
            <span>1 tbsp olive oil or nuts</span>
          </div>
          
          <div class="meal-time">Before Bed (100-200 kcal)</div>
          <div class="meal-item">
            <span>Casein protein or Greek yogurt</span>
          </div>
        `;
      }
      
      mealPlan.innerHTML = mealPlanHTML;
    }

    // Generate workout plan based on goal
    function generateWorkoutPlan() {
      workoutPlanContent.innerHTML = '';
      
      let workoutPlanHTML = '';
      
      if (goal === 'bulk') {
        workoutPlanHTML = `
          <h4 class="plan-subtitle">Muscle Building Workout Plan (4 days/week)</h4>
          <p>Focus on progressive overload with compound lifts to maximize muscle growth. Rest 2-3 minutes between sets.</p>
          
          <div class="workout-day">
            <div class="day-title">Day 1: Chest & Triceps</div>
            <div class="exercise">
              <span class="exercise-name">Bench Press</span>
              <span class="exercise-sets">4 sets x 6-8 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Incline Dumbbell Press</span>
              <span class="exercise-sets">3 sets x 8-10 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Dips</span>
              <span class="exercise-sets">3 sets x 10-12 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Tricep Pushdowns</span>
              <span class="exercise-sets">3 sets x 12 reps</span>
            </div>
          </div>
          
          <div class="workout-day">
            <div class="day-title">Day 2: Back & Biceps</div>
            <div class="exercise">
              <span class="exercise-name">Pull-ups</span>
              <span class="exercise-sets">4 sets x 6-8 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Barbell Rows</span>
              <span class="exercise-sets">3 sets x 8-10 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Lat Pulldown</span>
              <span class="exercise-sets">3 sets x 10-12 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Barbell Curls</span>
              <span class="exercise-sets">3 sets x 10-12 reps</span>
            </div>
          </div>
          
          <div class="workout-day">
            <div class="day-title">Day 3: Legs</div>
            <div class="exercise">
              <span class="exercise-name">Squats</span>
              <span class="exercise-sets">4 sets x 6-8 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Romanian Deadlifts</span>
              <span class="exercise-sets">3 sets x 8-10 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Leg Press</span>
              <span class="exercise-sets">3 sets x 10-12 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Calf Raises</span>
              <span class="exercise-sets">4 sets x 15-20 reps</span>
            </div>
          </div>
          
          <div class="workout-day">
            <div class="day-title">Day 4: Shoulders & Arms</div>
            <div class="exercise">
              <span class="exercise-name">Overhead Press</span>
              <span class="exercise-sets">4 sets x 6-8 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Lateral Raises</span>
              <span class="exercise-sets">3 sets x 10-12 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Close-grip Bench Press</span>
              <span class="exercise-sets">3 sets x 8-10 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Hammer Curls</span>
              <span class="exercise-sets">3 sets x 10-12 reps</span>
            </div>
          </div>
          
          <p><strong>Cardio:</strong> Minimal - 1-2 sessions of light cardio (20-30 min) per week to maintain cardiovascular health without burning excess calories.</p>
        `;
      } else {
        workoutPlanHTML = `
          <h4 class="plan-subtitle">Fat Loss Workout Plan (5 days/week)</h4>
          <p>Focus on compound movements with higher reps and shorter rest periods to maximize calorie burn. Rest 30-60 seconds between sets.</p>
          
          <div class="workout-day">
            <div class="day-title">Day 1: Full Body Circuit</div>
            <div class="exercise">
              <span class="exercise-name">Squats</span>
              <span class="exercise-sets">3 sets x 12-15 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Push-ups</span>
              <span class="exercise-sets">3 sets x 12-15 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Bent-over Rows</span>
              <span class="exercise-sets">3 sets x 12-15 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Plank</span>
              <span class="exercise-sets">3 sets x 30-60 sec</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Jump Rope</span>
              <span class="exercise-sets">3 sets x 1 min</span>
            </div>
          </div>
          
          <div class="workout-day">
            <div class="day-title">Day 2: HIIT Cardio</div>
            <div class="exercise">
              <span class="exercise-name">Treadmill Sprints</span>
              <span class="exercise-sets">30 sec sprint, 60 sec walk x 10 rounds</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Burpees</span>
              <span class="exercise-sets">3 sets x 15 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Mountain Climbers</span>
              <span class="exercise-sets">3 sets x 30 sec</span>
            </div>
          </div>
          
          <div class="workout-day">
            <div class="day-title">Day 3: Upper Body</div>
            <div class="exercise">
              <span class="exercise-name">Dumbbell Bench Press</span>
              <span class="exercise-sets">3 sets x 12-15 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Lat Pulldown</span>
              <span class="exercise-sets">3 sets x 12-15 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Shoulder Press</span>
              <span class="exercise-sets">3 sets x 12-15 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Bicep Curls</span>
              <span class="exercise-sets">3 sets x 12-15 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Tricep Dips</span>
              <span class="exercise-sets">3 sets x 12-15 reps</span>
            </div>
          </div>
          
          <div class="workout-day">
            <div class="day-title">Day 4: Lower Body</div>
            <div class="exercise">
              <span class="exercise-name">Bodyweight Squats</span>
              <span class="exercise-sets">4 sets x 15-20 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Lunges</span>
              <span class="exercise-sets">3 sets x 12 reps per leg</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Glute Bridges</span>
              <span class="exercise-sets">3 sets x 15 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Calf Raises</span>
              <span class="exercise-sets">3 sets x 20 reps</span>
            </div>
          </div>
          
          <div class="workout-day">
            <div class="day-title">Day 5: Full Body Circuit</div>
            <div class="exercise">
              <span class="exercise-name">Kettlebell Swings</span>
              <span class="exercise-sets">3 sets x 20 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Push-up to Row</span>
              <span class="exercise-sets">3 sets x 10 reps per side</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Jump Squats</span>
              <span class="exercise-sets">3 sets x 15 reps</span>
            </div>
            <div class="exercise">
              <span class="exercise-name">Plank Shoulder Taps</span>
              <span class="exercise-sets">3 sets x 20 reps</span>
            </div>
          </div>
          
          <p><strong>Cardio:</strong> 3-5 sessions per week (20-45 min) of moderate to high intensity cardio. Include both steady-state and HIIT.</p>
        `;
      }
      
      workoutPlanContent.innerHTML = workoutPlanHTML;
    }

    // Handle browser back/forward buttons
    window.addEventListener('popstate', (e) => {
      if (e.state && e.state.section) {
        showSection(e.state.section);
      }
    });

    // Initialize the app when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>